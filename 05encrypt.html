<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="05style.css" />
    <title>05 - Baisic Encryption and Decryption</title>
</head>

<body>
    <!-- Page Header -->
    <div class="barrier"> </div>

    <!-- Back Button -->

    <div>
        <div class="backButton">
            <a href="home.html">Home</a>
        </div>
        <h1 class="pageHeader">05 - Baisic Encryption and Decryption</h1>
    </div>

    <div class="barrier"> </div>

    <!-- Page Body -->

    <div class="content" style="margin-right: 5px">
        <div id="inputBox">
            <div class="inputContent">
                <label target="encryptIn">Data to Encrypt: </label>
                <input id="encryptIn" oninput="checkInput(0)">
            </div>
    
            <div class="inputContent">
                <label target="encryptKey">Key: </label>
                <select id="encryptKey">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                </select>
            </div>
    
            <div class="inputContent">
                <button id="startEncrypt" disabled="true" onclick="clicked(0)">Encrypt!</button>
                <p id="errorEncrypt" style="color: red">Error: No symbols or numbers allowed.</p>
            </div>
    
            <div style="font-size: 150%">
                <p id="answerEncrypt"></p>
            </div>
        </div>
    </div>

    <div class="content" style="margin-left: 5px">
        <div id="inputBox">
            <div class="inputContent">
                <label target="decryptIn">Data to Decrypt: </label>
                <input id="decryptIn" oninput="checkInput(1)">
            </div>
    
            <div class="inputContent">
                <label target="decryptKey">Key: </label>
                <select id="decryptKey">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                </select>
            </div>
    
            <div class="inputContent">
                <button id="startDecrypt" disabled="true" onclick="clicked(1)">Decrypt!</button>
                <p id="errorDecrypt" style="color: red">Error: No symbols or numbers allowed.</p>
            </div>
    
            <div style="font-size: 150%">
                <p id="answerDecrypt"></p>
            </div>
        </div>
    </div>
    
    <!-- Footer -->

    <div class="barrier"> </div>

    <div class="footer">
        <p style="display:inline;">Developed by </p>
        <a href="https://ianhiga.github.io/Portfolio/home.html " style="display:inline; color:gray;">Ian Higa</a>
        <p>February 13, 2024 - February 13, 2024</p>
    </div>

    <script>
        function checkInput(ver){
            var allowed = /^[A-Za-z\s]+$/;
            if(ver == 0){
                var text = document.getElementById("encryptIn").value;
            }
            else{
                var text = document.getElementById("decryptIn").value;
            }


            if(text.match(allowed)){
                if(ver == 0){
                    document.getElementById("startEncrypt").disabled = false;
                    document.getElementById("errorEncrypt").style.display = "none";
                }
                else{
                    document.getElementById("startDecrypt").disabled = false;
                    document.getElementById("errorDecrypt").style.display = "none";
                }
            }
            else{
                if(ver == 0){
                    document.getElementById("startEncrypt").disabled = true;
                    document.getElementById("errorEncrypt").style.display = "block";
                }
                else{
                    document.getElementById("startDecrypt").disabled = true;
                    document.getElementById("errorDecrypt").style.display = "block";
                }
            }
        }

        function clicked(mode){
            if(mode == 0){
                shiftString(document.getElementById("encryptIn").value, Number(document.getElementById("encryptKey").value), 0);
            }
            else{
                shiftString(document.getElementById("decryptIn").value, Number(document.getElementById("decryptKey").value), 1);
            }

        }

        function shiftString(str, num, ver){
            var newStr = "";

            if(ver == 0){
                for(i = 0; i < str.length; i++){
                    const charCode = str.charCodeAt(i);

                    if(charCode >= 65 && charCode <= 90){
                        if(charCode + num > 90){
                            newStr += String.fromCharCode(charCode - (26 - num));
                        }
                        else{
                            newStr += String.fromCharCode(charCode + num);
                        }
                    }
                    else if(charCode >= 97 && charCode <= 122){
                        if(charCode + num > 122){
                            newStr += String.fromCharCode(charCode - (26 - num));
                        }
                        else{
                            newStr += String.fromCharCode(charCode + num);
                        }
                    }
                    else{
                        newStr += str[i];
                    }
                }
                document.getElementById("answerEncrypt").innerHTML = newStr;
            }
            else{
                for(i = 0; i < str.length; i++){
                    const charCode = str.charCodeAt(i);

                    if(charCode >= 65 && charCode <= 90){
                        if(charCode - num < 65){
                            newStr += String.fromCharCode(charCode + (26 - num));
                        }
                        else{
                            newStr += String.fromCharCode(charCode - num);
                        }
                    }
                    else if(charCode >= 97 && charCode <= 122){
                        if(charCode - num < 97){
                            newStr += String.fromCharCode(charCode + (26 - num));
                        }
                        else{
                            newStr += String.fromCharCode(charCode - num);
                        }
                    }
                    else{
                        newStr += str[i];
                    }
                }
                document.getElementById("answerDecrypt").innerHTML = newStr;
            }
        }
    </script>
</body>
</html>